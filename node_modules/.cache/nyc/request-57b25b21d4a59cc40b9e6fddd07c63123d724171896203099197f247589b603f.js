function cov_qls3hxf4v(){var path="/home/douglas/Documentos/estudos/promises/src/request.js";var hash="3cd00e411882aafc506c30317d1dce3edefb9d0a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/douglas/Documentos/estudos/promises/src/request.js",statementMap:{"0":{start:{line:1,column:30},end:{line:1,column:47}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:4,column:0},end:{line:35,column:2}},"3":{start:{line:5,column:17},end:{line:6,column:54}},"4":{start:{line:5,column:41},end:{line:6,column:54}},"5":{start:{line:6,column:4},end:{line:6,column:54}},"6":{start:{line:9,column:4},end:{line:11,column:7}},"7":{start:{line:10,column:6},end:{line:10,column:58}},"8":{start:{line:15,column:4},end:{line:26,column:7}},"9":{start:{line:16,column:6},end:{line:25,column:29}},"10":{start:{line:18,column:24},end:{line:18,column:26}},"11":{start:{line:19,column:10},end:{line:23,column:66}},"12":{start:{line:21,column:14},end:{line:21,column:31}},"13":{start:{line:23,column:29},end:{line:23,column:64}},"14":{start:{line:30,column:4},end:{line:33,column:7}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:41},end:{line:6,column:54}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:41},end:{line:5,column:42}},loc:{start:{line:6,column:4},end:{line:6,column:54}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:33},end:{line:12,column:3}},line:8},"3":{name:"(anonymous_3)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:44},end:{line:11,column:5}},line:9},"4":{name:"(anonymous_4)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:17},end:{line:27,column:3}},line:14},"5":{name:"(anonymous_5)",decl:{start:{line:15,column:23},end:{line:15,column:24}},loc:{start:{line:15,column:44},end:{line:26,column:5}},line:15},"6":{name:"(anonymous_6)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:27},end:{line:24,column:9}},line:17},"7":{name:"(anonymous_7)",decl:{start:{line:20,column:24},end:{line:20,column:25}},loc:{start:{line:20,column:34},end:{line:22,column:13}},line:20},"8":{name:"(anonymous_8)",decl:{start:{line:23,column:23},end:{line:23,column:24}},loc:{start:{line:23,column:29},end:{line:23,column:64}},line:23},"9":{name:"(anonymous_9)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:46},end:{line:34,column:3}},line:29}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3cd00e411882aafc506c30317d1dce3edefb9d0a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_qls3hxf4v=function(){return actualCoverage;};}return actualCoverage;}cov_qls3hxf4v();const{INSPECT_MAX_BYTES}=(cov_qls3hxf4v().s[0]++,require('buffer'));const https=(cov_qls3hxf4v().s[1]++,require('https'));cov_qls3hxf4v().s[2]++;module.exports=class Request{errorTimeout=(cov_qls3hxf4v().s[3]++,(reject,urlRequest)=>{cov_qls3hxf4v().f[0]++;cov_qls3hxf4v().s[4]++;return()=>{cov_qls3hxf4v().f[1]++;cov_qls3hxf4v().s[5]++;return reject(new Error(`timeout at [${urlRequest}] :(`));};});raceTimeoutDelay(url,timeout){cov_qls3hxf4v().f[2]++;cov_qls3hxf4v().s[6]++;return new Promise((resolve,reject)=>{cov_qls3hxf4v().f[3]++;cov_qls3hxf4v().s[7]++;setTimeout(this.errorTimeout(reject,url),timeout);});}async get(url){cov_qls3hxf4v().f[4]++;cov_qls3hxf4v().s[8]++;return new Promise((resolve,reject)=>{cov_qls3hxf4v().f[5]++;cov_qls3hxf4v().s[9]++;https.get(url,res=>{cov_qls3hxf4v().f[6]++;const items=(cov_qls3hxf4v().s[10]++,[]);cov_qls3hxf4v().s[11]++;res.on('data',data=>{cov_qls3hxf4v().f[7]++;cov_qls3hxf4v().s[12]++;items.push(data);}).on('end',()=>{cov_qls3hxf4v().f[8]++;cov_qls3hxf4v().s[13]++;return resolve(JSON.parse(items.join('')));});}).on('error',reject);});}async makeRequest({url,method,timeout}){cov_qls3hxf4v().f[9]++;cov_qls3hxf4v().s[14]++;return Promise.race([this[method](url),this.raceTimeoutDelay(url,timeout)]);}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3QuanMiXSwibmFtZXMiOlsiSU5TUEVDVF9NQVhfQllURVMiLCJyZXF1aXJlIiwiaHR0cHMiLCJtb2R1bGUiLCJleHBvcnRzIiwiUmVxdWVzdCIsImVycm9yVGltZW91dCIsInJlamVjdCIsInVybFJlcXVlc3QiLCJFcnJvciIsInJhY2VUaW1lb3V0RGVsYXkiLCJ1cmwiLCJ0aW1lb3V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2V0IiwicmVzIiwiaXRlbXMiLCJvbiIsImRhdGEiLCJwdXNoIiwiSlNPTiIsInBhcnNlIiwiam9pbiIsIm1ha2VSZXF1ZXN0IiwibWV0aG9kIiwicmFjZSJdLCJtYXBwaW5ncyI6InE5RkFlWTt5RkFmWixLQUFNLENBQUVBLGlCQUFGLDBCQUF3QkMsT0FBTyxDQUFDLFFBQUQsQ0FBL0IsQ0FBTixDQUNBLEtBQU1DLENBQUFBLEtBQUsseUJBQUdELE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBWCxDLHVCQUVBRSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsS0FBTUMsQ0FBQUEsT0FBUSxDQUM3QkMsWUFBWSx5QkFBRyxDQUFDQyxNQUFELENBQVNDLFVBQVQsR0FBd0IseURBQ3JDLHFEQUFBRCxDQUFBQSxNQUFNLENBQUMsR0FBSUUsQ0FBQUEsS0FBSixDQUFXLGVBQWNELFVBQVcsTUFBcEMsQ0FBRCxDQUFOLENBQWtELENBRGIsQ0FDYSxDQUR4QyxFQUdaRSxnQkFBZ0IsQ0FBQ0MsR0FBRCxDQUFNQyxPQUFOLENBQWUsK0NBQzdCLE1BQU8sSUFBSUMsQ0FBQUEsT0FBSixDQUFZLENBQUNDLE9BQUQsQ0FBVVAsTUFBVixHQUFxQiwrQ0FDdENRLFVBQVUsQ0FBQyxLQUFLVCxZQUFMLENBQWtCQyxNQUFsQixDQUEwQkksR0FBMUIsQ0FBRCxDQUFpQ0MsT0FBakMsQ0FBVixDQUNELENBRk0sQ0FBUCxDQUdELENBRVEsS0FBSEksQ0FBQUEsR0FBRyxDQUFDTCxHQUFELENBQU0sK0NBQ2IsTUFBTyxJQUFJRSxDQUFBQSxPQUFKLENBQVksQ0FBQ0MsT0FBRCxDQUFVUCxNQUFWLEdBQXFCLCtDQUN0Q0wsS0FBSyxDQUNGYyxHQURILENBQ09MLEdBRFAsQ0FDYU0sR0FBRCxFQUFTLHdCQUNqQixLQUFNQyxDQUFBQSxLQUFLLDBCQUFHLEVBQUgsQ0FBWCxDQURpQix3QkFFakJELEdBQUcsQ0FDQUUsRUFESCxDQUNNLE1BRE4sQ0FDZUMsSUFBRCxFQUFVLGdEQUNwQkYsS0FBSyxDQUFDRyxJQUFOLENBQVdELElBQVgsRUFDRCxDQUhILEVBSUdELEVBSkgsQ0FJTSxLQUpOLENBSWEsSUFBTSxzREFBQUwsQ0FBQUEsT0FBTyxDQUFDUSxJQUFJLENBQUNDLEtBQUwsQ0FBV0wsS0FBSyxDQUFDTSxJQUFOLENBQVcsRUFBWCxDQUFYLENBQUQsQ0FBUCxDQUFtQyxDQUp0RCxFQUtELENBUkgsRUFTR0wsRUFUSCxDQVNNLE9BVE4sQ0FTZVosTUFUZixFQVVELENBWE0sQ0FBUCxDQVlELENBRWdCLEtBQVhrQixDQUFBQSxXQUFXLENBQUMsQ0FBRWQsR0FBRixDQUFPZSxNQUFQLENBQWVkLE9BQWYsQ0FBRCxDQUEyQixnREFDMUMsTUFBT0MsQ0FBQUEsT0FBTyxDQUFDYyxJQUFSLENBQWEsQ0FDbEIsS0FBS0QsTUFBTCxFQUFhZixHQUFiLENBRGtCLENBRWxCLEtBQUtELGdCQUFMLENBQXNCQyxHQUF0QixDQUEyQkMsT0FBM0IsQ0FGa0IsQ0FBYixDQUFQLENBSUQsQ0E5QjRCLENBQS9CIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBJTlNQRUNUX01BWF9CWVRFUyB9ID0gcmVxdWlyZSgnYnVmZmVyJyk7XG5jb25zdCBodHRwcyA9IHJlcXVpcmUoJ2h0dHBzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUmVxdWVzdCB7XG4gIGVycm9yVGltZW91dCA9IChyZWplY3QsIHVybFJlcXVlc3QpID0+ICgpID0+XG4gICAgcmVqZWN0KG5ldyBFcnJvcihgdGltZW91dCBhdCBbJHt1cmxSZXF1ZXN0fV0gOihgKSk7XG5cbiAgcmFjZVRpbWVvdXREZWxheSh1cmwsIHRpbWVvdXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2V0VGltZW91dCh0aGlzLmVycm9yVGltZW91dChyZWplY3QsIHVybCksIHRpbWVvdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0KHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBodHRwc1xuICAgICAgICAuZ2V0KHVybCwgKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgICAgICAgcmVzXG4gICAgICAgICAgICAub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBpdGVtcy5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignZW5kJywgKCkgPT4gcmVzb2x2ZShKU09OLnBhcnNlKGl0ZW1zLmpvaW4oJycpKSkpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIG1ha2VSZXF1ZXN0KHsgdXJsLCBtZXRob2QsIHRpbWVvdXQgfSkge1xuICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgdGhpc1ttZXRob2RdKHVybCksXG4gICAgICB0aGlzLnJhY2VUaW1lb3V0RGVsYXkodXJsLCB0aW1lb3V0KSxcbiAgICBdKTtcbiAgfVxufTtcbiJdfQ==