function cov_4es8dnen0(){var path="/home/douglas/Documentos/estudos/promises-generatos-iterators/src/request.js";var hash="ce5b3c52a7e16aac0f5b9b0a0c2e4141fd9d0805";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/douglas/Documentos/estudos/promises-generatos-iterators/src/request.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:30}},"1":{start:{line:3,column:0},end:{line:45,column:2}},"2":{start:{line:4,column:17},end:{line:5,column:54}},"3":{start:{line:4,column:41},end:{line:5,column:54}},"4":{start:{line:5,column:4},end:{line:5,column:54}},"5":{start:{line:8,column:4},end:{line:10,column:7}},"6":{start:{line:9,column:6},end:{line:9,column:58}},"7":{start:{line:14,column:4},end:{line:36,column:7}},"8":{start:{line:15,column:6},end:{line:35,column:29}},"9":{start:{line:17,column:24},end:{line:17,column:26}},"10":{start:{line:18,column:10},end:{line:33,column:15}},"11":{start:{line:20,column:14},end:{line:20,column:31}},"12":{start:{line:23,column:41},end:{line:23,column:55}},"13":{start:{line:32,column:14},end:{line:32,column:54}},"14":{start:{line:40,column:4},end:{line:43,column:7}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:41},end:{line:5,column:54}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:5,column:4},end:{line:5,column:54}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:33},end:{line:11,column:3}},line:7},"3":{name:"(anonymous_3)",decl:{start:{line:8,column:23},end:{line:8,column:24}},loc:{start:{line:8,column:44},end:{line:10,column:5}},line:8},"4":{name:"(anonymous_4)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:17},end:{line:37,column:3}},line:13},"5":{name:"(anonymous_5)",decl:{start:{line:14,column:23},end:{line:14,column:24}},loc:{start:{line:14,column:44},end:{line:36,column:5}},line:14},"6":{name:"(anonymous_6)",decl:{start:{line:16,column:18},end:{line:16,column:19}},loc:{start:{line:16,column:27},end:{line:34,column:9}},line:16},"7":{name:"(anonymous_7)",decl:{start:{line:19,column:24},end:{line:19,column:25}},loc:{start:{line:19,column:34},end:{line:21,column:13}},line:19},"8":{name:"(anonymous_8)",decl:{start:{line:22,column:23},end:{line:22,column:24}},loc:{start:{line:22,column:29},end:{line:33,column:13}},line:22},"9":{name:"(anonymous_9)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:46},end:{line:44,column:3}},line:39}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ce5b3c52a7e16aac0f5b9b0a0c2e4141fd9d0805"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_4es8dnen0=function(){return actualCoverage;};}return actualCoverage;}cov_4es8dnen0();const https=(cov_4es8dnen0().s[0]++,require('https'));cov_4es8dnen0().s[1]++;module.exports=class Request{errorTimeout=(cov_4es8dnen0().s[2]++,(reject,urlRequest)=>{cov_4es8dnen0().f[0]++;cov_4es8dnen0().s[3]++;return()=>{cov_4es8dnen0().f[1]++;cov_4es8dnen0().s[4]++;return reject(new Error(`timeout at [${urlRequest}] :(`));};});raceTimeoutDelay(url,timeout){cov_4es8dnen0().f[2]++;cov_4es8dnen0().s[5]++;return new Promise((resolve,reject)=>{cov_4es8dnen0().f[3]++;cov_4es8dnen0().s[6]++;setTimeout(this.errorTimeout(reject,url),timeout);});}async get(url){cov_4es8dnen0().f[4]++;cov_4es8dnen0().s[7]++;return new Promise((resolve,reject)=>{cov_4es8dnen0().f[5]++;cov_4es8dnen0().s[8]++;https.get(url,res=>{cov_4es8dnen0().f[6]++;const items=(cov_4es8dnen0().s[9]++,[]);cov_4es8dnen0().s[10]++;res.on('data',data=>{cov_4es8dnen0().f[7]++;cov_4es8dnen0().s[11]++;items.push(data);}).on('end',()=>{cov_4es8dnen0().f[8]++;const stringifiedReponse=(cov_4es8dnen0().s[12]++,items.join(''));// if (!stringifiedReponse.length) {
//   throw new Error(
//     JSON.stringify({
//       error: true,
//       message: 'Received empty response',
//     })
//   );
// }
cov_4es8dnen0().s[13]++;resolve(JSON.parse(stringifiedReponse));});}).on('error',reject);});}async makeRequest({url,method,timeout}){cov_4es8dnen0().f[9]++;cov_4es8dnen0().s[14]++;return Promise.race([this[method](url),this.raceTimeoutDelay(url,timeout)]);}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3QuanMiXSwibmFtZXMiOlsiaHR0cHMiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIlJlcXVlc3QiLCJlcnJvclRpbWVvdXQiLCJyZWplY3QiLCJ1cmxSZXF1ZXN0IiwiRXJyb3IiLCJyYWNlVGltZW91dERlbGF5IiwidXJsIiwidGltZW91dCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImdldCIsInJlcyIsIml0ZW1zIiwib24iLCJkYXRhIiwicHVzaCIsInN0cmluZ2lmaWVkUmVwb25zZSIsImpvaW4iLCJKU09OIiwicGFyc2UiLCJtYWtlUmVxdWVzdCIsIm1ldGhvZCIsInJhY2UiXSwibWFwcGluZ3MiOiI2L0ZBZVk7eUZBZlosS0FBTUEsQ0FBQUEsS0FBSyx5QkFBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFYLEMsdUJBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixLQUFNQyxDQUFBQSxPQUFRLENBQzdCQyxZQUFZLHlCQUFHLENBQUNDLE1BQUQsQ0FBU0MsVUFBVCxHQUF3Qix5REFDckMscURBQUFELENBQUFBLE1BQU0sQ0FBQyxHQUFJRSxDQUFBQSxLQUFKLENBQVcsZUFBY0QsVUFBVyxNQUFwQyxDQUFELENBQU4sQ0FBa0QsQ0FEYixDQUNhLENBRHhDLEVBR1pFLGdCQUFnQixDQUFDQyxHQUFELENBQU1DLE9BQU4sQ0FBZSwrQ0FDN0IsTUFBTyxJQUFJQyxDQUFBQSxPQUFKLENBQVksQ0FBQ0MsT0FBRCxDQUFVUCxNQUFWLEdBQXFCLCtDQUN0Q1EsVUFBVSxDQUFDLEtBQUtULFlBQUwsQ0FBa0JDLE1BQWxCLENBQTBCSSxHQUExQixDQUFELENBQWlDQyxPQUFqQyxDQUFWLENBQ0QsQ0FGTSxDQUFQLENBR0QsQ0FFUSxLQUFISSxDQUFBQSxHQUFHLENBQUNMLEdBQUQsQ0FBTSwrQ0FDYixNQUFPLElBQUlFLENBQUFBLE9BQUosQ0FBWSxDQUFDQyxPQUFELENBQVVQLE1BQVYsR0FBcUIsK0NBQ3RDTixLQUFLLENBQ0ZlLEdBREgsQ0FDT0wsR0FEUCxDQUNhTSxHQUFELEVBQVMsd0JBQ2pCLEtBQU1DLENBQUFBLEtBQUsseUJBQUcsRUFBSCxDQUFYLENBRGlCLHdCQUVqQkQsR0FBRyxDQUNBRSxFQURILENBQ00sTUFETixDQUNlQyxJQUFELEVBQVUsZ0RBQ3BCRixLQUFLLENBQUNHLElBQU4sQ0FBV0QsSUFBWCxFQUNELENBSEgsRUFJR0QsRUFKSCxDQUlNLEtBSk4sQ0FJYSxJQUFNLHdCQUNmLEtBQU1HLENBQUFBLGtCQUFrQiwwQkFBR0osS0FBSyxDQUFDSyxJQUFOLENBQVcsRUFBWCxDQUFILENBQXhCLENBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRlLHdCQVVmVCxPQUFPLENBQUNVLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxrQkFBWCxDQUFELENBQVAsQ0FDRCxDQWZILEVBZ0JELENBbkJILEVBb0JHSCxFQXBCSCxDQW9CTSxPQXBCTixDQW9CZVosTUFwQmYsRUFxQkQsQ0F0Qk0sQ0FBUCxDQXVCRCxDQUVnQixLQUFYbUIsQ0FBQUEsV0FBVyxDQUFDLENBQUVmLEdBQUYsQ0FBT2dCLE1BQVAsQ0FBZWYsT0FBZixDQUFELENBQTJCLGdEQUMxQyxNQUFPQyxDQUFBQSxPQUFPLENBQUNlLElBQVIsQ0FBYSxDQUNsQixLQUFLRCxNQUFMLEVBQWFoQixHQUFiLENBRGtCLENBRWxCLEtBQUtELGdCQUFMLENBQXNCQyxHQUF0QixDQUEyQkMsT0FBM0IsQ0FGa0IsQ0FBYixDQUFQLENBSUQsQ0F6QzRCLENBQS9CIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFJlcXVlc3Qge1xuICBlcnJvclRpbWVvdXQgPSAocmVqZWN0LCB1cmxSZXF1ZXN0KSA9PiAoKSA9PlxuICAgIHJlamVjdChuZXcgRXJyb3IoYHRpbWVvdXQgYXQgWyR7dXJsUmVxdWVzdH1dIDooYCkpO1xuXG4gIHJhY2VUaW1lb3V0RGVsYXkodXJsLCB0aW1lb3V0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHNldFRpbWVvdXQodGhpcy5lcnJvclRpbWVvdXQocmVqZWN0LCB1cmwpLCB0aW1lb3V0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldCh1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaHR0cHNcbiAgICAgICAgLmdldCh1cmwsIChyZXMpID0+IHtcbiAgICAgICAgICBjb25zdCBpdGVtcyA9IFtdO1xuICAgICAgICAgIHJlc1xuICAgICAgICAgICAgLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgaXRlbXMucHVzaChkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRSZXBvbnNlID0gaXRlbXMuam9pbignJyk7XG4gICAgICAgICAgICAgIC8vIGlmICghc3RyaW5naWZpZWRSZXBvbnNlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgLy8gICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgLy8gICAgICAgZXJyb3I6IHRydWUsXG4gICAgICAgICAgICAgIC8vICAgICAgIG1lc3NhZ2U6ICdSZWNlaXZlZCBlbXB0eSByZXNwb25zZScsXG4gICAgICAgICAgICAgIC8vICAgICB9KVxuICAgICAgICAgICAgICAvLyAgICk7XG4gICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHN0cmluZ2lmaWVkUmVwb25zZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignZXJyb3InLCByZWplY3QpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbWFrZVJlcXVlc3QoeyB1cmwsIG1ldGhvZCwgdGltZW91dCB9KSB7XG4gICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICB0aGlzW21ldGhvZF0odXJsKSxcbiAgICAgIHRoaXMucmFjZVRpbWVvdXREZWxheSh1cmwsIHRpbWVvdXQpLFxuICAgIF0pO1xuICB9XG59O1xuIl19